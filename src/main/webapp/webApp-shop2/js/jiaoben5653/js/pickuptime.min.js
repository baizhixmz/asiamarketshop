var pickuptime={
		init:function(a,b){
			this.setuptime=a;
			this.run(b);
		},marketgetTime:function(){
			var k=this.setuptime;
			var g=new Date();
			g.setDate(g.getDate()+k);
			var h=g.getDay();
			var l=g.getHours();
			var f=parseInt(h);
			var d="";
			var a=["Sun","Mon","Tue","Wed","Thur","Fri","Sat"];
			var e=new Array();
			var b,j;
			for(var c=k;c<15+k;c++){
				if(f==7){
					f=0;
				}
				if(c==0){
					b=g.getMonth()+1;
					j=g.getDate();
					e.push(b+"-"+j+" "+a[f]);
				}else{
					if(c==1){
						g.setDate(g.getDate()+1);
						b=g.getMonth()+1;
						j=g.getDate();
						e.push(b+"-"+j+" "+a[f])
					}else{
						if(c==2){
							g.setDate(g.getDate()+1);
							b=g.getMonth()+1;
							j=g.getDate();
							e.push(b+"-"+j+" "+a[f]);
						}else{
							g.setDate(g.getDate()+1);
							b=g.getMonth()+1;
							j=g.getDate();
							e.push(b+"-"+j+" "+a[f]);
						}
					}
				}
				f++;
				j++
			}
			e.push(l);
			return e
		},todoble:function(a,m){
			if(m == 0){
				m = "00";
			}
			if(a<10){
				a="0"+a+":"+m;
			}else{
				a=a+":"+m;
			}
			return a
		},run:function(f){
			
			
			var c=this.marketgetTime();
			
			var a="";
			var t = new Date();
			var hh = t.getHours();
			var minutes = t.getMinutes();
			for(var b=10;b<=20;b++){	
				if(b == 20){
					a+="<li class='pickuptime'>"+this.todoble(b,0)+"</li>";
					break;
				}
				for(var m = 0;m<=40;m += 20){
					
					if(b<hh){
													
						a+="<li class='pickuptime pickuptime-sp hide'>"+this.todoble(b,m)+"</li>"
						
					}else if(b == hh && m < minutes){
						
						a+="<li class='pickuptime pickuptime-sp hide'>"+this.todoble(b,m)+"</li>"
					}else{
						
						a+="<li class='pickuptime'>"+this.todoble(b,m)+"</li>"
						
					}
				}
			}
			var e="<div id='pickuptimeContener'><div class='pickuptime-close-empty'></div><div id='pickuptime'><p class='pickuptime-title'>Bitte wählen Sie Abholzeit</p><div class='pickuptime-box'><ul><li class='pickuptime-datap pickuptime-data-on'>"+c[0]+"</li><li class='pickuptime-datap'>"+c[1]+"</li><li class='pickuptime-datap'>"+c[2]+"</li><li class='pickuptime-datap'>"+c[3]+"</li><li class='pickuptime-datap'>"+c[4]+"</li><li class='pickuptime-datap'>"+c[5]+"</li><li class='pickuptime-datap'>"+c[6]+"</li><li class='pickuptime-datap'>"+c[7]+"</li><li class='pickuptime-datap'>"+c[8]+"</li><li class='pickuptime-datap'>"+c[9]+"</li><li class='pickuptime-datap'>"+c[10]+"</li><li class='pickuptime-datap'>"+c[11]+"</li><li class='pickuptime-datap'>"+c[12]+"</li><li class='pickuptime-datap'>"+c[13]+"</li><li class='pickuptime-datap'>"+c[14]+"</li></ul>";
			e+="<ul>"+a+"</ul></div><div class='pickuptime-close'>关闭</div></div></div>";
			if($("#pickuptimeContener").length>0){
				$("#pickuptimeContener").remove();
			}
			$("body").append(e);
			var d=$(window).height()-$(".pickuptime-title").offset().top;
			$(".pickuptime-close-empty").css("height",d+"px");
			$(".pickuptime-close-empty,.pickuptime-close").on("click",function(){
				$("#pickuptimeContener").remove()});
				$(".pickuptime-datap").on("click",function(){
					
					var t = new Date();
					var d1 = t.getDate();
					var hh = t.getHours();
					var d2 = $(this).text().substr(a+1,b-2);
					console.log(d2)
					$(".pickuptime").each(function(){
						
						
						var h = $(this).text().substr(0,$(this).text().indexOf(":"));					
						var mm = $(this).text().substr($(this).text().indexOf(":")+1);					
						
						
						
						if(d1 == d2 && h < hh){
							$(this).hide();
						}else{
							$(this).show();
						}
					});
					
					
					var g=$(this).index();
					if(g!=0){
						$(".pickuptime-sp").show();
					}else{
						$(".pickuptime-sp").hide();
					}
					$(this).addClass("pickuptime-data-on").siblings().removeClass("pickuptime-data-on")});
					$(".pickuptime").on("click",function(){
						$(this).addClass("pickuptime-on").siblings().removeClass("pickuptime-on");
						var g=$(".pickuptime-data-on").text()+" "+$(".pickuptime-on").text();
						$(".pickuptime-close-empty").click();
						if(Object.prototype.toString.call(f)==="[object Function]"){
							f(g);
						}else{
							return false;
						}
					})
				}};